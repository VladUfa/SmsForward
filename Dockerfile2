FROM thyrlian/android-sdk:8.0

RUN apt-get update
RUN DEBIAN_FRONTEND="noninteractive" apt-get install -y --no-install-recommends \
    build-essential \
    ruby3.0-dev \
	git \
	locales \
	unzip \
	wget \
	tzdata \
	&& locale-gen $LANG $LC_ALL && update-locale $LANG $LC_ALL

ENV ANDROID_DEPS='platform-tools \
 build-tools;32.0.0 \
 extras;android;m2repository \
 extras;google;m2repository'
RUN (while sleep 1; do echo "y"; done) | sdkmanager $ANDROID_DEPS
ENV PATH=${ANDROID_SDK_ROOT}/tools/bin:${ANDROID_SDK_ROOT}/build-tools/32.0.0:${PATH}

# Fastlane
RUN gem install fastlane bundler

VOLUME /home/builder/src
